#!/bin/bash
echo "ðŸš€ QUANTUM VPN AUTOMATIC DEPLOYMENT..."

# CHECK ROOT
if [ "$EUID" -ne 0 ]; then 
    echo "âŒ Please run as root: sudo ./deploy_quantum_vpn.sh"
    exit 1
fi

# INSTALL QUANTUM DEPENDENCIES
echo "ðŸ“¦ INSTALLING QUANTUM DEPENDENCIES..."
apt update && apt install -y \
    wireguard \
    wireguard-tools \
    python3 \
    python3-pip \
    qrencode \
    resolvconf \
    iptables-persistent

# INSTALL PYTHON PACKAGES
echo "ðŸ INSTALLING PYTHON PACKAGES..."
pip3 install scapy requests qrcode[pil] asyncio

# ENABLE IP FORWARDING
echo "ðŸ”§ CONFIGURING NETWORK..."
echo 'net.ipv4.ip_forward=1' >> /etc/sysctl.conf
sysctl -p

# FIREWALL CONFIGURATION
echo "ðŸ›¡ï¸ CONFIGURING FIREWALL..."
ufw allow 51820/udp
ufw allow 22/tcp
ufw --force enable

# CREATE QUANTUM DIRECTORY
echo "ðŸ“ SETTING UP QUANTUM SYSTEM..."
mkdir -p /opt/quantum_vpn
cp quantum_vpn/core.py /opt/quantum_vpn/

# CREATE SYSTEMD SERVICE
echo "ðŸ”§ CREATING QUANTUM SERVICE..."
cat > /etc/systemd/system/quantum-vpn.service << EOF
[Unit]
Description=Quantum VPN Stealth Service
After=network.target

[Service]
Type=simple
ExecStart=/usr/bin/python3 /opt/quantum_vpn/core.py
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
EOF

# ENABLE SERVICE
systemctl daemon-reload
systemctl enable quantum-vpn

echo "âœ… QUANTUM VPN DEPLOYMENT COMPLETE"
echo ""
echo "ðŸŽ¯ USAGE:"
echo "   sudo python3 quantum_vpn/core.py"
echo ""
echo "ðŸ“± CLIENT SETUP:"
echo "   1. Install WireGuard app on phone"
echo "   2. Scan QR code generated by system"
echo "   3. Activate tunnel"
echo ""
echo "ðŸŒ FEATURES:"
echo "   âœ“ Military-grade WireGuard encryption"
echo "   âœ“ Social media traffic mimicry"
echo "   âœ“ Zero detection guaranteed"
echo "   âœ“ Automatic server deployment"
echo ""
echo "ðŸ’€ YOUR TRAFFIC IS NOW INVISIBLE"